<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Purchase Price Web Application</title>

      <!-- External Stylesheet -->
      <link href="css/style.css" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.18/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
   
    <div class="container mt-5">
        <h2 class="text-center">Property Purchase Price Form</h2>

        <button onclick="signOut()" class="btn btn-secondary">Sign Out</button>
  

<!-- Data Capture Form -->
<form id="propertyForm" class="needs-validation mt-5" novalidate>
    <h4>Owner Information</h4>
    <div class="mb-3">
        <label for="ownerFirstName" class="form-label">Owner First Name</label>
        <input type="text" class="form-control" id="ownerFirstName" placeholder="Enter owner first name" required>
        <div class="invalid-feedback">Please enter the owner's first name.</div>
    </div>
    <div class="mb-3">
        <label for="ownerLastName" class="form-label">Owner Last Name</label>
        <input type="text" class="form-control" id="ownerLastName" placeholder="Enter owner last name" required>
        <div class="invalid-feedback">Please enter the owner's last name.</div>
    </div>
    <div class="mb-3">
        <label for="ownerEmail" class="form-label">Owner Email Address</label>
        <input type="email" class="form-control" id="ownerEmail" placeholder="Enter owner email address" required>
        <div class="invalid-feedback">Please enter a valid owner's email address.</div>
    </div>

    <h4>Agent Information</h4>
    <div class="mb-3">
        <label for="agentFirstName" class="form-label">Agent First Name</label>
        <input type="text" class="form-control" id="agentFirstName" placeholder="Enter agent's first name" required>
        <div class="invalid-feedback">Please enter the agent's first name.</div>
    </div>
    <div class="mb-3">
        <label for="agentLastName" class="form-label">Agent Last Name</label>
        <input type="text" class="form-control" id="agentLastName" placeholder="Enter agent's last name" required>
        <div class="invalid-feedback">Please enter the agent's last name.</div>
    </div>
    <div class="mb-3">
        <label for="agentPhoneNumber" class="form-label">Agent Phone Number</label>
        <input type="tel" class="form-control" id="agentPhoneNumber" placeholder="Enter agent's phone number" required>
        <div class="invalid-feedback">Please enter the agent's phone number.</div>
    </div>

    <h4>Offer Details</h4>
    <div class="mb-3">
        <label for="arv" class="form-label">ARV</label>
        <input type="number" class="form-control" id="arv" placeholder="Enter ARV" required>
        <div class="invalid-feedback">Please enter the ARV (After Repair Value).</div>
    </div>
    <div class="mb-3">
        <label for="holdingPeriod" class="form-label">Holding Period (Months)</label>
        <input type="number" class="form-control" id="holdingPeriod" placeholder="Enter holding period in months" required>
        <div class="invalid-feedback">Please enter the holding period in months.</div>
    </div>
    <div class="mb-3">
        <label for="monthlyAssociationFees" class="form-label">Monthly Association Fees</label>
        <input type="number" class="form-control" id="monthlyAssociationFees" placeholder="Enter monthly association fees" required>
        <div class="invalid-feedback">Please enter the monthly association fees.</div>
    </div>
    <div class="mb-3">
        <label for="annualTaxes" class="form-label">Annual Taxes</label>
        <input type="number" class="form-control" id="annualTaxes" placeholder="Enter annual taxes" required>
        <div class="invalid-feedback">Please enter the annual taxes.</div>
    </div>

    <h4>Property Information</h4>
    <div class="mb-3">
        <label for="propertyAddress" class="form-label">Property Address</label>
        <input type="text" class="form-control" id="propertyAddress" placeholder="Enter property address" required>
        <div class="invalid-feedback">Please enter the property address.</div>
    </div>
    <div class="mb-3">
        <label for="propertyCityStateZip" class="form-label">City, State ZIP</label>
        <input type="text" class="form-control" id="propertyCityStateZip" placeholder="Enter city, state, and ZIP code" required>
        <div class="invalid-feedback">Please enter the city, state, and ZIP code.</div>
    </div>
    <div class="mb-3">
        <label for="livingSqFt" class="form-label">Living Square Footage</label>
        <input type="number" class="form-control" id="livingSqFt" placeholder="Enter living square footage" required>
        <div class="invalid-feedback">Please enter the living square footage.</div>
    </div>
    <div class="mb-3">
        <label for="totalSqFt" class="form-label">Total Square Footage</label>
        <input type="number" class="form-control" id="totalSqFt" placeholder="Enter total square footage" required>
        <div class="invalid-feedback">Please enter the total square footage.</div>
    </div>
    <div class="mb-3">
        <label for="lotSize" class="form-label">Lot Size (sq ft)</label>
        <input type="number" class="form-control" id="lotSize" placeholder="Enter lot size" required>
        <div class="invalid-feedback">Please enter the lot size.</div>
    </div>
    <div class="mb-3">
        <label for="bedrooms" class="form-label">Number of Bedrooms</label>
        <input type="number" class="form-control" id="bedrooms" placeholder="Enter number of bedrooms" required>
        <div class="invalid-feedback">Please enter the number of bedrooms.</div>
    </div>
    <div class="mb-3">
        <label for="bathrooms" class="form-label">Number of Bathrooms</label>
        <input type="number" class="form-control" id="bathrooms" placeholder="Enter number of bathrooms" required step="0.1">
        <div class="invalid-feedback">Please enter the number of bathrooms.</div>
    </div>

    <h4>Property Features</h4>
    <div class="mb-3">
        <label class="form-label">Pool</label>
        <select class="form-select" id="pool" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if the property has a pool.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Equipment</label>
        <select class="form-select" id="equipment" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if the property has equipment.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Water Treatment</label>
        <select class="form-select" id="waterTreatment" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if the property has water treatment.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Tile</label>
        <select class="form-select" id="tile" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if the property has tile work needed.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Resurface</label>
        <select class="form-select" id="resurface" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if resurfacing is required.</div>
    </div>
    <div class="mb-3">
        <label for="windows" class="form-label">Number of Windows</label>
        <input type="number" class="form-control" id="windows" placeholder="Enter number of windows" required>
        <div class="invalid-feedback">Please enter the number of windows.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Electric</label>
        <select class="form-select" id="electric" required>
            <option value="basic" selected>Basic</option>
            <option value="fullRenovation">Full Renovation</option>
        </select>
        <div class="invalid-feedback">Please select the type of electric work needed.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Electric Panel Needed</label>
        <select class="form-select" id="electricPanel" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if an electric panel is needed.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">AC Needed</label>
        <select class="form-select" id="acNeeded" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if AC is needed.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">AC Duct Work Needed</label>
        <select class="form-select" id="acDuctWork" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if AC duct work is needed.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Landscaping Needed</label>
        <select class="form-select" id="landscapingNeeded" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if landscaping is needed.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Kitchen</label>
        <select class="form-select" id="kitchen" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if kitchen work is required.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Appliance (Full Package)</label>
        <select class="form-select" id="appliance" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if a full appliance package is needed.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Flooring</label>
        <select class="form-select" id="flooring" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if flooring is required.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Paint Interior</label>
        <select class="form-select" id="paintInterior" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if interior painting is required.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Paint Exterior</label>
        <select class="form-select" id="paintExterior" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if exterior painting is required.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Roof</label>
        <select class="form-select" id="roof" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if roof work is required.</div>
    </div>
    <div class="mb-3">
        <label class="form-label">Other</label>
        <select class="form-select" id="other" required>
            <option value="no" selected>No</option>
            <option value="yes">Yes</option>
        </select>
        <div class="invalid-feedback">Please select if any other work is required.</div>
    </div>

    <h4>Additional Items</h4>
    <div class="mb-3">
        <label for="customRenovationAmount1" class="form-label">Additional Item 1 Amount ($)</label>
        <input type="number" class="form-control" id="customRenovationAmount1" placeholder="Enter amount">
        <div class="invalid-feedback">Please enter the amount for additional item 1.</div>
    </div>

    <div class="mb-3">
        <label for="customRenovationAmount2" class="form-label">Additional Item 2 Amount ($)</label>
        <input type="number" class="form-control" id="customRenovationAmount2" placeholder="Enter amount">
        <div class="invalid-feedback">Please enter the amount for additional item 2.</div>
    </div>

    <div class="mb-3">
        <label for="customRenovationAmount3" class="form-label">Additional Item 3 Amount ($)</label>
        <input type="number" class="form-control" id="customRenovationAmount3" placeholder="Enter amount">
        <div class="invalid-feedback">Please enter the amount for additional item 3.</div>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</form>


    

        <!-- Modal -->
        <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Login Successful</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Welcome, you have successfully logged in with Google!</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
       <div id="responseMessage"></div>

<!-- Modal to show offer options after form submission -->
<div class="modal fade" id="offerOptionsModal" tabindex="-1" aria-labelledby="offerOptionsLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="offerOptionsLabel">Offer Actions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Select an action to proceed:</p>
                <button type="button" class="btn btn-primary w-100 mb-2" id="viewBuyingAgentOffer"><i class="fa-sharp-duotone fa-solid fa-file"></i> View Offer for Buying Agent</button>
                <button type="button" class="btn btn-primary w-100 mb-2" id="viewSellerOffer"><i class="fa-sharp-duotone fa-solid fa-file"></i> View Offer for Seller</button>
                <button type="button" class="btn btn-success w-100 mb-2" id="downloadWholesaleOfferLetter"><i class="fa-sharp-duotone fa-solid fa-download"></i> Download Wholesale Offer Letter</button>
                <button type="button" class="btn btn-success w-100 mb-2" id="downloadRetailOfferLetter"><i class="fa-sharp-duotone fa-solid fa-download"></i> Download Retail Offer Letter</button>
                <button type="button" class="btn btn-danger w-100 mb-2" id="emailWholesaleOfferLetter"><i class="fa-sharp-duotone fa-solid fa-envelope"></i> Email Wholesale Offer Letter</button>
                <button type="button" class="btn btn-danger w-100" id="emailRetailOfferLetter"><i class="fa-sharp-duotone fa-solid fa-envelope"></i> Email Retail Offer Letter</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal To Display Agent Offer (Triggered by Button) -->
<div class="modal fade" id="agentOfferModal" tabindex="-1" aria-labelledby="agentOfferLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="agentOfferLabel">Offer Presentation for Buying Agent</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="d-flex align-items-center">
                <!-- Wholesale Download Link -->
                <a href="#" id="downloadAgentOfferTop" class="me-3 d-flex align-items-center text-decoration-none">
                  <i class="fa-solid fa-download me-1"></i> <!--FILLER-->
                </a>
              </div>
          <p><strong>Client:</strong> <span id="clientNameAgent"></span></p>
          <p><strong>Property Address:</strong> <span id="propertyAddressAgent"></span></p>
          <p><strong>ARV:</strong> <span id="arvAgent"></span></p>
          <p><strong>Holding Period (months):</strong> <span id="holdingPeriodAgent"></span></p>
          <p><strong>Monthly Association Fees:</strong> <span id="associationFeesAgent"></span></p>
          <p><strong>Annual Taxes:</strong> <span id="annualTaxesAgent"></span></p>
          <p><strong>Retail Buying Offer:</strong> <span id="retailOfferAgent"></span></p>
          <p><strong>Percentage of ARV:</strong> <span id="percentageArvAgent"></span></p>
          <p><strong>Wholesale Buying Offer:</strong> <span id="wholesaleOfferAgent"></span></p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="downloadAgentOfferBottom"><i class="fa-sharp-duotone fa-solid fa-download"></i> PDF</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for Offer Presentation to Seller -->
  <div class="modal fade" id="sellerOfferModal" tabindex="-1" aria-labelledby="sellerOfferLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="sellerOfferLabel">Offer Presentation for Seller</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="d-flex align-items-center">
                <!-- Wholesale Download Link -->
                <a href="#" id="downloadWholesalePDFTop" class="me-3 d-flex align-items-center text-decoration-none">
                  <i class="fa-solid fa-download me-1"></i> Wholesale
                </a>
      
                <!-- Retail Download Link -->
                <a href="#" id="downloadRetailPDFTop" class="d-flex align-items-center text-decoration-none">
                  <i class="fa-solid fa-download me-1"></i> Retail
                </a>
              </div>
          <table class="table">
            <tr>
              <th>Client</th>
              <td id="sellerClientName"></td>
            </tr>
            <tr>
                <th>Property Address</th>
                <td id="sellerPropertyAddress"></td>
              </tr>
              <tr>
                <th>City, State ZIP</th>
                <td id="sellerPropertyCityStateZip"></td>
              </tr>
              <tr>
                <th>Offer Date</th>
                <td id="sellerOfferDate"></td>
              </tr>
            <tr>
              <th>Cash Offer</th>
              <td id="sellerCashOffer"></td>
            </tr>
            <tr>
              <th>Other Sale Options</th>
              <th>Retail Sale - After Repairs</th>
              <th>Retail Sale - As Is</th>
            </tr>
            <tr>
              <th>Market Value</th>
              <td id="sellerMarketValueAfterRepairs"></td>
              <td id="sellerMarketValueAsIs"></td>
            </tr>
            <tr>
              <th>Costs to Achieve Value</th>
              <td colspan="2"></td>
            </tr>
            <tr>
              <th>Selling Commission and Costs</th>
              <td id="sellerCommissionAfterRepairs"></td>
              <td id="sellerCommissionAsIs"></td>
            </tr>
            <tr>
              <th>Repairs to Achieve Market Value</th>
              <td id="sellerRequiredRepairs"></td>
              <td>Not Applicable</td>
            </tr>
            <tr>
              <th>Opportunity Cost of foregoing cash offer</th>
              <td id="sellerOpportunityCostAfterRepairs"></td>
              <td id="sellerOpportunityCostAsIs"></td>
            </tr>
            <tr>
              <th>Association Fees</th>
              <td id="sellerAssociationFeesAfterRepairs"></td>
              <td id="sellerAssociationFeesAsIs"></td>
            </tr>
            <tr>
              <th>Taxes</th>
              <td id="sellerTaxesAfterRepairs"></td>
              <td id="sellerTaxesAsIs"></td>
            </tr>
            <tr>
              <th>Total Costs</th>
              <td id="sellerTotalCostsAfterRepairs"></td>
              <td id="sellerTotalCostsAsIs"></td>
            </tr>
            <tr>
              <th>Net to You</th>
              <td id="sellerNetAfterRepairs"></td>
              <td id="sellerNetAsIs"></td>
            </tr>
          </table>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="downloadWholesalePDFBottom"><i class="fa-sharp-duotone fa-solid fa-download"></i> Wholesale</button>
            <button type="button" class="btn btn-primary" id="downloadRetailPDFBottom"><i class="fa-sharp-duotone fa-solid fa-download"></i> Retail</button>
          </div>
          
      </div>
    </div>
  </div>
  
  <!-- Button to trigger the seller offer modal -->
  <button id="viewOffersButton" type="button" class="btn btn-primary mt-5" data-bs-toggle="modal" data-bs-target="#offerOptionsModal">
    View Offers
  </button>
 

    <!-- External Libraries -->
    <script src="https://kit.fontawesome.com/797a3be51e.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- Configuration Variables -->
    <!-- <script>
        const googleClientId = "257537625805-2rpqesq2t71bma08teuigaeqjdi65pph.apps.googleusercontent.com";
        const googleRedirectUri = "https://property-price-estimator.netlify.app/pricing_tool";
    </script> -->

    <!-- Custom Scripts -->
    <script src="js/googleAuth.js"></script>
    <script src="js/googleSheetsAPI.js"></script> 
    <script src="js/formHandler.js"></script>
    <script src="js/helpers.js"></script>
    <script src="js/offerData.js"></script>
    <script src="js/pdfEmailHandler.js"></script>
    <script src="js/main.js"></script> 
    <script>
        if (typeof checkAuth === 'function' && !checkAuth()) {
            alert('Please log in with Google first.');
            window.location.href = '/';
        }
        </script>
    <!-- Inline Script for Modal Backdrop Removal -->
    <script>
        document.addEventListener('hidden.bs.modal', function (event) {
            const backdrops = document.querySelectorAll('.modal-backdrop');
            backdrops.forEach(backdrop => backdrop.remove());
        });
    </script>

</body>
</html>
